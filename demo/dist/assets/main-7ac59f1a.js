(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function s(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(t){if(t.ep)return;t.ep=!0;const i=s(t);fetch(t.href,i)}})();const g=5,c=6,a=10;let h=(e,l,s,r)=>(e.events=e.events||{},e.events[s+a]||(e.events[s+a]=r(t=>{e.events[s].reduceRight((i,n)=>(n(i),i),{shared:{},...t})})),e.events[s]=e.events[s]||[],e.events[s].push(l),()=>{let t=e.events[s],i=t.indexOf(l);t.splice(i,1),t.length||(delete e.events[s],e.events[s+a](),delete e.events[s+a])}),L=1e3,O=(e,l)=>h(e,r=>{let t=l(r);t&&e.events[c].push(t)},g,r=>{let t=e.listen;e.listen=(...n)=>(!e.lc&&!e.active&&(e.active=!0,r()),t(...n));let i=e.off;return e.events[c]=[],e.off=()=>{i(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let n of e.events[c])n();e.events[c]=[]}},L)},()=>{e.listen=t,e.off=i}}),f=[],y=(e,l)=>{let s=[],r={lc:0,l:l||0,value:e,set(t){r.value!==t&&(r.value=t,r.notify())},get(){return r.lc||r.listen(()=>{})(),r.value},notify(t){let i=!f.length;for(let n=0;n<s.length;n+=2)f.push(s[n],r.value,t,s[n+1]);if(i){for(let n=0;n<f.length;n+=4){let d=!1;for(let o=n+7;o<f.length;o+=4)if(f[o]<f[n+3]){d=!0;break}d?f.push(f[n],f[n+1],f[n+2],f[n+3]):f[n](f[n+1],f[n+2])}f.length=0}},listen(t,i){return r.lc=s.push(t,i||r.l)/2,()=>{let n=s.indexOf(t);~n&&(s.splice(n,2),r.lc--,r.lc||r.off())}},subscribe(t,i){let n=r.listen(t,i);return t(r.value),n},off(){}};return r},p=e=>e,u={},v={addEventListener(){},removeEventListener(){}};function E(){try{return typeof localStorage<"u"}catch{return!1}}E()&&(u=localStorage);let m={addEventListener(e,l){window.addEventListener("storage",l)},removeEventListener(e,l){window.removeEventListener("storage",l)}};typeof window<"u"&&(v=m);function N(e,l=void 0,s={}){let r=s.encode||p,t=s.decode||p,i=y(l),n=i.set;i.set=o=>{typeof o>"u"?delete u[e]:u[e]=r(o),n(o)};function d(o){o.key===e?o.newValue===null?n(void 0):n(t(o.newValue)):u[e]||n(void 0)}return O(i,()=>{if(i.set(u[e]?t(u[e]):l),s.listen!==!1)return v.addEventListener(e,d),()=>{v.removeEventListener(e,d)}}),i}const w=N("test",[],{encode:JSON.stringify,decode:JSON.parse}),S=document.querySelector("#items");w.subscribe(e=>{S.textContent=JSON.stringify(e,null,2)});export{w as a};
